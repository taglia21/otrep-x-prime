# OTREP-X PRIME Configuration
# All trading parameters externalized for easy tuning and backtesting

SYSTEM:
  SYMBOLS: [
    # Big Tech
    'AAPL', 'MSFT', 'GOOGL', 'AMZN', 'NVDA', 'META', 'TSLA',
    # Semiconductors
    'AMD', 'INTC', 'QCOM', 'AVGO', 'TXN', 'MU', 'ADI', 'LRCX', 'AMAT', 'KLAC', 'SNPS', 'CDNS',
    # Enterprise Software / Cloud
    'CRM', 'ADBE', 'ORCL', 'IBM', 'CSCO', 'NOW', 'WDAY', 'ADSK',
    # Mobility / Consumer Tech
    'UBER', 'ABNB',
    # Cybersecurity
    'PANW', 'FTNT', 'CRWD', 'ZS',
    # Fintech
    'SQ', 'PYPL',
    # Cloud Infrastructure / Data
    'SHOP', 'NET', 'SNOW', 'DDOG', 'PLTR', 'TEAM'
  ]
  CHECK_INTERVAL: 60  # seconds between trading cycles

ALPACA:
  # API keys remain in .env for security
  BASE_URL: 'https://paper-api.alpaca.markets'
  DATA_URL: 'https://data.alpaca.markets'

POLYGON:
  # API key in .env as POLYGON_API_KEY
  BASE_URL: 'https://api.polygon.io'

STRATEGY:
  TIMEFRAME: '5Min'
  MOMENTUM_LOOKBACK: 20       # Default lookback periods
  TREND_LOOKBACK: 15          # Older bars for trend calculation
  SIGNAL_THRESHOLD: 0.15      # Reduced from 0.3 for more trades
  NEUTRAL_THRESHOLD: 0.05     # Signal strength below which we exit
  SIGNAL_WEIGHTS:
    MOMENTUM: 0.4             # Reduced for graph alpha
    TREND: 0.0                # Disabled - using mean reversion instead
    MEAN_REVERSION: 0.4       # Reduced for graph alpha
    GRAPH: 0.2                # New: Laplacian diffusion graph signal
  ADAPTIVE:
    ENABLED: true
    HIGH_VOL_LOOKBACK: 10     # Shorter lookback in high volatility
    LOW_VOL_LOOKBACK: 30      # Longer lookback in low volatility
    VOL_MULTIPLIER: 1.5       # Threshold for "high" volatility
  MEAN_REVERSION:
    ENABLED: true
    LOOKBACK: 20              # Lookback for SMA/STD calculation
    BB_STD_DEV_MULTIPLIER: 2.0  # Bollinger Band width factor
    REVERSION_THRESHOLD: 0.01   # Signal strength for mean reversion

GRAPH_ALPHA:
  ENABLED: true
  # Key normalized: ADJACENCY_THRESHOLD (was CORRELATION_THRESHOLD)
  ADJACENCY_THRESHOLD: 0.5         # CTO Directive: 0.5 for stability
  # CORRELATION_THRESHOLD: 0.5     # Deprecated alias - still works
  DIFFUSION_ALPHA: 1.0             # Laplacian diffusion strength
  LOOKBACK_BARS: 50                # Bars for correlation calculation

MARKET_FILTER:
  # Key normalized: SPY_CORRELATION_THRESHOLD (was CORRELATION_THRESHOLD)
  SPY_CORRELATION_THRESHOLD: 0.75  # Min correlation to market proxy
  # CORRELATION_THRESHOLD: 0.75    # Deprecated alias - still works
  MARKET_PROXY_SYMBOL: 'SPY'       # Market benchmark for correlation
  LOOKBACK_DAYS: 30                # Days to calculate correlation

RISK:
  # === Volatility Targeting (CTO Directive) ===
  # Daily budget: $1,000 / 8 expected stop-outs = $125 max risk per trade
  TARGET_RISK_PER_TRADE_USD: 125.0
  MAX_POSITION_SIZE_USD: 5000.0  # Cap to prevent concentration
  ATR_RISK_MULTIPLIER: 1.5       # ATR multiplier for risk calculation
  
  # === Stop-Loss and Limits ===
  STOP_LOSS_PCT: 0.02         # 2% stop loss on entry price
  MAX_POSITIONS: 3            # Maximum concurrent positions
  DAILY_LOSS_LIMIT_PCT: 0.01  # 1% portfolio drawdown halts trading
  
  # === Kill Switch Thresholds (CTO Directive) ===
  KILL_SWITCH_DRAWDOWN_PCT: 0.004    # 0.40% daily drawdown triggers kill switch
  KILL_SWITCH_MAX_REJECTS: 5         # Consecutive order rejects
  KILL_SWITCH_DATA_STALE_SEC: 600    # 10 minutes data staleness
  KILL_SWITCH_MAX_API_FAILS: 3       # Consecutive API failures

BACKTEST:
  SLIPPAGE_BPS: 5.0           # 5 basis points (typical for high-volume stocks)
  COMMISSION_FIXED: 1.0       # $1.00 per execution
  INITIAL_CAPITAL: 100000     # Starting capital for backtests
